<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Click Store - Panel del Comerciante</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <!-- Swiper Carousel Styles -->
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

  <!-- Custom Styles -->
  <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
  <link rel="stylesheet" type="text/css" href="css/responsive.css" />
  <link rel="stylesheet" type="text/css" href="css/estilop.css" />

  <!-- Estilos Personalizados -->
  <style>
    /* Variables de colores para fácil modificación */
    :root {
      --primary-color: #2c3e50;
      /* Azul oscuro */
      --secondary-color: #ecf0f1;
      /* Gris claro */
      --accent-color: #e98411;
      /* Azul brillante para acentos */
      --text-color: #34495e;
      /* Gris oscuro para texto */
      --background-gradient: linear-gradient(135deg, #ecf0f1, #bdc3c7);
      --font-family: 'Roboto', sans-serif;
      --transition-speed: 0.3s;
      --border-radius: 10px;
      --box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    body {
      font-family: var(--font-family);
      background: var(--background-gradient);
      color: var(--text-color);
      margin: 0;
      padding: 0;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-weight: 500;
      color: var(--primary-color);
    }

    /* Header */
    .header {
      padding: 15px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #bdc3c7;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logo img {
      max-width: 180px;
      transition: transform var(--transition-speed) ease;
    }

    .logo img:hover {
      transform: scale(1.05);
    }

    .nav-links {
      display: flex;
      align-items: center;
    }

    .nav-links .comerciante-info {
      font-size: 16px;
      color: #000000;
      font-weight: bold;
      margin-right: 20px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .nav-links a {
      color: #ffffff;
      text-decoration: none;
      font-weight: bold;
      margin-left: 15px;
      transition: color var(--transition-speed) ease;
    }

    .nav-links a:hover {
      color: var(--accent-color);
      text-decoration: underline;
    }

    /* Main Container */
    .container-main {
      display: flex;
      flex-wrap: wrap;
      margin: 20px;
      background: var(--secondary-color);
      padding: 20px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      animation: fadeIn 0.5s ease-out;
    }

    /* Merchant Information */
    .comerciante-recuadro {
      border: 1px solid var(--accent-color);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
      background-color: #ffffff;
      color: var(--text-color);
      margin-right: 20px;
      width: 300px;
      transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    }

    .comerciante-recuadro:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .comerciante-recuadro h2 {
      font-size: 24px;
      color: var(--accent-color);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .comerciante-recuadro p {
      font-size: 16px;
      color: var(--text-color);
      margin-bottom: 10px;
      line-height: 1.5;
    }

    /* Dashboard Items */
    .dashboard-item {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid var(--accent-color);
      border-radius: var(--border-radius);
      background-color: #f7f7f7;
      text-align: center;
      box-shadow: var(--box-shadow);
      color: var(--text-color);
      transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    }

    .dashboard-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .dashboard-item h4 {
      font-size: 18px;
      color: var(--accent-color);
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .dashboard-item p {
      font-size: 16px;
      color: var(--text-color);
      font-weight: bold;
    }

    /* Product List */
    .product-list {
      flex: 1;
      background-color: #ffffff;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 20px;
      margin-top: 20px;
      color: var(--text-color);
      transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    }

    .product-list:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }

    .product-list h1 {
      font-size: 28px;
      margin-bottom: 20px;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Product Item */
    .product-item {
      border: 1px solid #d1d1d1;
      border-radius: var(--border-radius);
      margin-bottom: 20px;
      padding: 15px;
      text-align: center;
      width: calc(33.33% - 40px);
      height: 450px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
      background-color: #ffffff;
      color: var(--text-color);
      display: inline-block;
      vertical-align: top;
      position: relative;
      overflow: hidden;
      transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease, background-color var(--transition-speed) ease;
      margin-right: 15px;
    }

    .product-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
      background-color: #f1f1f1;
    }

    /* Ajustar imagen en el contenedor del producto */
    .product-image {
      display: block;
      /* Asegura que la imagen sea un elemento de bloque */
      max-width: 100%;
      /* La imagen no excederá el ancho del contenedor */
      max-height: 200px;
      /* Limita la altura máxima de la imagen */
      height: auto;
      /* Mantiene la proporción original de la imagen */
      margin: 0 auto;
      /* Centra la imagen horizontalmente */
      object-fit: contain;
      /* Asegura que toda la imagen esté contenida en el área */
      border-radius: 8px;
      /* Bordes redondeados para un diseño más atractivo */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      /* Sombra suave para dar profundidad */
    }

    .product-item:hover .product-image {
      transform: scale(1.05);
    }

    /*productos del comerciante*/




    .product-item h3 {
      font-size: 18px;
      height: 40px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      color: var(--text-color);
      margin-bottom: 10px;
    }

    .product-item p {
      font-size: 14px;
      color: #666666;
      height: 60px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      margin-bottom: 10px;
    }

    .product-item .price {
      font-size: 18px;
      color: var(--accent-color);
      margin-top: 10px;
      font-weight: bold;
    }

    .product-item .stock {
      font-size: 14px;
      font-weight: bolder;
      text-align: center;
      margin: 1px 0;
      color: #666666;
    }

    .product-item .ver-mas {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background-color: var(--accent-color);
      color: #ffffff;
      border: none;
      padding: 8px 15px;
      cursor: pointer;
      text-decoration: none;
      border-radius: 5px;
      transition: background-color var(--transition-speed) ease;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .product-item .ver-mas:hover {
      background-color: #b67718;
    }

    /* Subir Producto Button */
    #subir-producto-btn {
      background: var(--accent-color);
      color: #ffffff;
      margin-bottom: 20px;
      transition: background-color var(--transition-speed) ease;
      border-radius: 5px;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    #subir-producto-btn:hover {
      background: #aa4604;
    }

    /* Footer */
    footer {
      background: var(--primary-color);
      color: #ffffff;
      padding: 20px;
      text-align: center;
      position: relative;
      bottom: 0;
      width: 100%;
      margin-top: 40px;
      border-top: 2px solid #bdc3c7;
    }

    footer a {
      color: var(--accent-color);
      text-decoration: none;
      font-weight: bold;
      transition: color var(--transition-speed) ease;
      margin: 0 10px;
    }

    footer a:hover {
      color: #5b8ab8;
    }

    /* Dashboard Charts */
    .dashboard-charts {
      display: flex;
      justify-content: space-between;
      margin: 30px;
      flex-wrap: wrap;
      gap: 20px;
    }

    .chart-box {
      width: 48%;
      margin-bottom: 30px;
      background-color: #ffffff;
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
      color: var(--text-color);
      transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
      position: relative;
      height: 400px;
      /* Ajuste para limitar la altura */
    }

    .chart-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .chart-box h2 {
      font-size: 24px;
      color: var(--accent-color);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    canvas {
      background-color: #ecf0f1;
      padding: 20px;
      border-radius: var(--border-radius);
      transition: all var(--transition-speed) ease;
      width: 100% !important;
      /* Asegurar que el canvas ocupe el 100% del contenedor */
      height: 300px !important;
      /* Limitar la altura del canvas */
    }

    /* Swiper Carousel */
    .swiper-container {
      background: var(--secondary-color);
      border-radius: 10px;
      padding: 20px;
      width: 90%;
      height: auto;
      min-height: 30px;
      margin: 0 auto 40px auto;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .swiper-slide {
      display: flex;
      justify-content: center;
      align-items: center;
      height: auto;
    }

    .product-item-carousel {
      width: 300px;
      width: 90%;
      /* Ajustar el ancho del producto en pantallas medianas */
      padding: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
      background-color: #ffffff;
      border-radius: 10px;
      text-align: center;
      color: var(--text-color);
      transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
    }

    .product-item-carousel:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
      background-color: #f1f1f1;
    }

    /* Imagen de productos */
    .product-item-carousel img {
      width: 80%;
      height: 150px;
      /* Reducir altura de la imagen en pantallas medianas */
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
      transition: transform var(--transition-speed) ease;
    }

    .product-item-carousel:hover img {
      transform: scale(1.05);
    }

    .product-item-carousel h3 {
      font-size: 18px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-bottom: 5px;
      color: var(--text-color);
    }

    .product-item-carousel p {
      font-size: 14px;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-bottom: 5px;
      color: #666666;
    }

    .product-item-carousel .price {
      font-size: 16px;
      color: var(--accent-color);
      font-weight: bold;
    }

    /* Swiper Navigation Buttons */
    .swiper-button-next,
    .swiper-button-prev {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: var(--accent-color);
      color: #ffffff;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      width: 40px;
      height: 40px;
      z-index: 10;
      opacity: 0.9;
      transition: background-color 0.3s ease, opacity 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .swiper-button-next:hover,
    .swiper-button-prev:hover {
      background-color: #cf7703;
      opacity: 1;
    }

    /* Swiper Pagination */
    .swiper-pagination-bullet {
      background: var(--accent-color);
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .swiper-pagination-bullet-active {
      opacity: 1;
      background: var(--primary-color);
    }


    .product-item-carousel {
      width: 300px;
      padding: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
      background-color: #ffffff;
      border-radius: var(--border-radius);
      text-align: center;
      color: var(--text-color);
      transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease, background-color var(--transition-speed) ease;
    }

    .product-item-carousel:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
      background-color: #f1f1f1;
    }

    .product-item-carousel img {
      width: 80%;
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
      transition: transform var(--transition-speed) ease;
    }

    .product-item-carousel:hover img {
      transform: scale(1.05);
    }

    .product-item-carousel h3 {
      font-size: 18px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-bottom: 5px;
      color: var(--text-color);
    }

    .product-item-carousel p {
      font-size: 14px;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-bottom: 5px;
      color: #666666;
    }

    .product-item-carousel .price {
      font-size: 16px;
      color: var(--accent-color);
      font-weight: bold;
    }

    /* Swiper Navigation Buttons */
    .swiper-button-next,
    .swiper-button-prev {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: var(--accent-color);
      color: #ffffff;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      width: 40px;
      height: 40px;
      z-index: 10;
      opacity: 0.9;
      transition: background-color var(--transition-speed) ease, opacity var(--transition-speed) ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .swiper-button-next:hover,
    .swiper-button-prev:hover {
      background-color: #6f9fc2;
      opacity: 1;
    }

    /* Pagination */
    .swiper-pagination-bullet {
      background: var(--accent-color);
      opacity: 0.7;
      transition: opacity var(--transition-speed) ease;
    }

    .swiper-pagination-bullet-active {
      opacity: 1;
      background: var(--primary-color);
    }

    /* Responsive Adjustments */
    @media (max-width: 992px) {
      .product-item {
        width: calc(50% - 40px);
      }

      .chart-box {
        width: 100%;
      }

      .product-item-carousel {
        width: 250px;
      }
    }

    @media (max-width: 768px) {
      .swiper-container {
        padding: 15px;
        max-width: 100%;
        /* Ancho completo en pantallas pequeñas */
      }

      .comerciante-recuadro {
        margin-right: 0;
        margin-bottom: 20px;
        width: 100%;
      }

      .product-item {
        width: calc(100% - 40px);
      }

      /* Carrusel responsivo */
      .swiper-container {
        background: var(--secondary-color);
        border-radius: 10px;
        padding: 20px;
        width: 100%;
        /* Ajuste para ocupar el 100% en móviles */
        max-width: 90%;
        /* En pantallas grandes, un límite de ancho */
        height: auto;
        min-height: 30px;
        margin: 0 auto 40px auto;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
    }

    @media (max-width: 480px) {
      .product-item {
        width: 100%;
      }

      .modal-content {
        padding: 20px;
      }

      .swiper-button-next,
      .swiper-button-prev {
        width: 30px;
        height: 30px;
      }
    }

    /* Modal Styles */
    .modal-content {
      background: #ffffff;
      color: var(--text-color);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 30px;
      max-width: 600px;
      margin: auto;
      transition: all var(--transition-speed) ease;
    }

    .modal-header {
      border-bottom: 1px solid #cccccc;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-bottom: 10px;
    }

    .modal-header h4 {
      color: var(--accent-color);
      font-weight: bold;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .modal-header .close {
      font-size: 24px;
      color: var(--text-color);
      transition: color var(--transition-speed) ease;
    }

    .modal-header .close:hover {
      color: var(--accent-color);
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      color: var(--text-color);
      font-weight: bold;
      margin-bottom: 5px;
      display: block;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #c4c9d1;
      border-radius: 5px;
      background-color: #f0f4f8;
      color: var(--text-color);
      font-size: 16px;
      box-sizing: border-box;
      transition: border-color var(--transition-speed) ease;
    }

    .form-group input::placeholder,
    .form-group select::placeholder,
    .form-group textarea::placeholder {
      color: #b0b0b0;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
    }

    .modal-footer .btn {
      border-radius: 5px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
      color: #ffffff;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .modal-footer .btn-primary {
      background-color: var(--accent-color);
      border: none;
    }

    .modal-footer .btn-primary:hover {
      background-color: #6f9fc2;
      transform: translateY(-2px);
    }

    .modal-footer .btn-danger {
      background-color: #e74c3c;
      border: none;
    }

    .modal-footer .btn-danger:hover {
      background-color: #c0392b;
      transform: translateY(-2px);
    }

    /* Animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    /* Loader Styles */
    .loader {
      border: 8px solid #f3f3f3;
      border-top: 8px solid var(--accent-color);
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
      margin: 50px auto;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* Contenedor de Filtros */
    .filter-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      background-color: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 29px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin: 20px auto;
      max-width: 9000px;
    }

    /* Barra de búsqueda */
    #search-bar {
      flex: 1;
      padding: 12px 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 18px;
      margin-right: 20px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    #search-bar:focus {
      border-color: #3498db;
      box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
      outline: none;
    }

    /* Contenedor de ordenamiento */
    .sort-container {
      display: flex;
      align-items: center;
      /* Alinea los elementos verticalmente al centro */
      gap: 10px;
      /* Añade espacio entre el texto y el selector */
      flex-shrink: 0;
      /* Evita que el contenedor se reduzca demasiado */
    }

    .sort-container label {
      font-size: 16px;
      /* Tamaño de fuente consistente */
      color: #555;
      /* Color gris oscuro para el texto */
      font-weight: bold;
      /* Negrita para destacar */
      display: flex;
      align-items: center;
      /* Alinea el ícono y el texto verticalmente */
      gap: 5px;
      /* Espacio entre el texto y el ícono */
      margin: 0;
      /* Elimina márgenes extra */
      white-space: nowrap;
      /* Evita que el texto se divida en dos líneas */
    }

    /* Selector ajustado */
    .sort-container select {
      padding: 10px 15px;
      /* Espaciado interno para hacerlo más grande */
      border: 1px solid #ccc;
      /* Borde gris claro */
      border-radius: 5px;
      /* Bordes redondeados */
      font-size: 16px;
      /* Tamaño de fuente para que combine con el texto */
      color: #555;
      /* Color del texto interno */
      background-color: #ffffff;
      /* Fondo blanco */
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      /* Sombra ligera para destacar */
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      /* Efectos suaves al interactuar */
      width: 200px;
      /* Tamaño fijo para evitar que se deforme */
    }

    .sort-container select:focus {
      border-color: #cf7703;
      /* Borde azul cuando está enfocado */
      box-shadow: 0 4px 8px rgba(255, 157, 0, 0.3);
      /* Sombra más pronunciada */
      outline: none;
      /* Elimina el contorno por defecto */
    }

    /* Ajustes responsivos */
    @media (max-width: 768px) {
      .filter-container {
        flex-direction: column;
        align-items: stretch;
      }

      #search-bar {
        margin-right: 0;
        margin-bottom: 20px;
      }

      .sort-container {
        justify-content: center;
      }
    }



    /*barra de busqueda*/


    /* Contenedor para el título y botón */
    .title-button-container {
      display: flex;
      /* Alinea los elementos horizontalmente */
      align-items: center;
      /* Centra verticalmente el título y el botón */
      justify-content: space-between;
      /* Coloca el título a la izquierda y el botón a la derecha */
      margin-bottom: 20px;
      /* Espaciado inferior */
    }

    /* Estilo del botón */
    #subir-producto-btn {
      background-color: #cf7703;
      /* Azul principal */
      color: #fff;
      /* Texto blanco */
      padding: 10px 20px;
      /* Espaciado interno */
      border: none;
      /* Sin borde */
      border-radius: 5px;
      /* Bordes redondeados */
      font-size: 16px;
      /* Tamaño de texto */
      font-weight: bold;
      /* Negrita */
      cursor: pointer;
      /* Cambia el cursor al pasar por encima */
      transition: background-color 0.3s ease;
      /* Transición suave al interactuar */
      display: flex;
      /* Alinea ícono y texto en una fila */
      align-items: center;
      /* Centra verticalmente el ícono y texto */
      gap: 10px;
      /* Espaciado entre el ícono y el texto */
    }

    #subir-producto-btn:hover {
      background-color: #2c81ba;
      /* Oscurece el azul al pasar el mouse */
    }

    /* Responsividad */
    @media (max-width: 768px) {
      .title-button-container {
        flex-direction: column;
        /* Cambia a disposición vertical en pantallas pequeñas */
        align-items: flex-start;
        /* Alinea los elementos a la izquierda */
        gap: 10px;
        /* Espaciado entre el título y el botón */
      }

      #subir-producto-btn {
        width: 100%;
        /* Ocupa todo el ancho en pantallas pequeñas */
        text-align: center;
        /* Centra el texto */
      }
    }
  </style>
</head>

<body>
  <div class="wrapper-wide">
    <!-- Inicio del encabezado -->
    <header class="header">
      <div class="logo">
        <a href="index.html"><img class="img-responsive" src="image/logo.png" title="Click Store"
            alt="Click Store" /></a>
      </div>
      <div class="nav-links">
        <span id="nombre-comerciante" class="comerciante-info"><i class="fas fa-user-circle"></i> Hola, [Nombre]</span>
        <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a>
      </div>
    </header>

    <!-- Encabezado End -->

    <!-- Contenedor principal con comerciante y productos -->
    <div class="container-main">
      <!-- Información del Comerciante -->
      <div class="comerciante-recuadro">
        <h2><i class="fas fa-store-alt"></i> Información del Comerciante</h2>
        <div id="comerciante-info"></div>

        <!-- Dashboard del Comerciante -->
        <div class="dashboard-item">
          <h4><i class="fas fa-boxes"></i> Total de Productos</h4>
          <p id="total-productos">0</p>
        </div>
        <div class="dashboard-item">
          <h4><i class="fas fa-tags"></i> Producto más Caro</h4>
          <p id="producto-mas-caro">N/A</p>
        </div>
        <div class="dashboard-item">
          <h4><i class="fas fa-star"></i> Total de Productos Recomendados</h4>
          <p id="total-productos-similares">0</p>
        </div>

      </div>

      <!-- Contenedor de la lista de productos -->
      <div class="product-list">

        <div class="title-filter-container">
          <!-- Título -->


          <div class="title-button-container">
            <!-- Título -->
            <h1>
              <i class="fas fa-box-open"></i> Mis Productos
            </h1>

            <!-- Botón de Subir Artículo -->
            <div class="text-right">
              <button id="subir-producto-btn" onclick="redirigirAProductos()">
                <i class="fas fa-upload"></i> Subir Artículo
              </button>
            </div>
          </div>






          <!-- Filtros -->
          <div class="filter-container">
            <!-- Barra de búsqueda -->
            <input type="text" id="search-bar" placeholder="Buscar producto..." class="form-control"
              onkeyup="filtrarProductos()" />

            <!-- Contenedor de ordenamiento -->
            <div class="sort-container">
              <label for="ordenar">
                <i class="fas fa-sort"></i> Ordenar por:
              </label>
              <select id="ordenar" class="form-control" onchange="ordenarProductos()">
                <option value="nombre">Nombre</option>
                <option value="precio-asc">Precio: Menor a Mayor</option>
                <option value="precio-desc">Precio: Mayor a Menor</option>
              </select>
            </div>
          </div>
        </div>



        <div id="productos-lista">
          <!-- Los productos se cargarán aquí -->
        </div>
      </div>
    </div>

    <!-- Swiper Carousel para productos recomendados -->
    <div class="product-list">
      <h1>Te pueden interesar estos artículos</h1>
      <div class="swiper-container" id="productos-recomendados">
        <div class="swiper-wrapper">
          <!-- Los productos recomendados se cargarán aquí dinámicamente -->
        </div>
        <!-- Botones de navegación -->
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <!-- Paginación -->
        <div class="swiper-pagination"></div>
      </div>
    </div>


    <!-- Gráficos de ventas -->
    <div class="dashboard-charts container">
      <div class="chart-box">
        <h2><i class="fas fa-chart-bar"></i> Artículos Más Vendidos</h2>
        <canvas id="topProductsChart"></canvas>
      </div>
      <div class="chart-box">
        <h2><i class="fas fa-chart-line"></i> Ventas Mensuales</h2>
        <canvas id="monthlySalesChart"></canvas>
      </div>
    </div>
  </div>

  <!-- Modal para editar producto -->
  <div class="modal fade" id="editarProductoModal" tabindex="-1" role="dialog"
    aria-labelledby="editarProductoModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">




        <div class="modal-header">
          <h4 class="modal-title" id="editarProductoModalLabel"><i class="fas fa-edit"></i> Editar Producto</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"
            onclick="$('#editarProductoModal').modal('hide');">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>






        <div class="modal-body">
          <input type="hidden" id="producto-id">
          <div class="form-group">
            <label for="producto-nombre"><i class="fas fa-tag"></i> Nombre del Producto</label>
            <input type="text" class="form-control" id="producto-nombre" placeholder="Nombre del Producto">
          </div>
          <div class="form-group">
            <label for="producto-descripcion"><i class="fas fa-info-circle"></i> Descripción</label>
            <textarea class="form-control" id="producto-descripcion" rows="3"
              placeholder="Descripción del Producto"></textarea>
          </div>
          <div class="form-group">
            <label for="producto-precio"><i class="fas fa-dollar-sign"></i> Precio</label>
            <input type="number" class="form-control" id="producto-precio" placeholder="Precio" min="0" step="0.01">
          </div>
          <div class="form-group">
            <label for="producto-foto"><i class="fas fa-image"></i> URL de la Foto</label>
            <input type="text" class="form-control" id="producto-foto" placeholder="URL de la Foto">
          </div>
          <div class="form-group">
            <label for="stock"><i class="fas fa-warehouse"></i> Stock</label>
            <input type="number" id="stock" name="stock" class="form-control" min="0" required>
          </div>
          <div class="form-group">
            <label for="producto-categoria"><i class="fas fa-list"></i> Categoría</label>
            <select class="form-control" id="producto-categoria">
              <option value="" disabled selected>Selecciona una categoría</option>
              <option value="Electrónica">Electrónica</option>
              <option value="Informática">Informática</option>
              <option value="Ropa">Ropa</option>
              <option value="Automóviles">Automóviles</option>
              <option value="Belleza">Belleza</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" onclick="eliminarProducto()"><i class="fas fa-trash-alt"></i>
            Eliminar</button>
          <button type="button" class="btn btn-primary" onclick="guardarCambiosProducto()"><i class="fas fa-save"></i>
            Guardar Cambios</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Pie de Página Inicio -->
  <footer id="footer">
    <p>&copy; 2024 Click Store | <a href="index.html">Inicio</a> | <a href="contact.html">Contacto</a></p>
  </footer>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script src="js/custom.js"></script>
  <script src="js/api.js"></script>

  <!-- Script Principal -->
  <script>
    let mySwiper; // Variable global para almacenar la instancia de Swiper

    document.addEventListener('DOMContentLoaded', function () {
      const nombreComerciante = sessionStorage.getItem('nombre');
      const comercianteId = sessionStorage.getItem('Id');

      if (nombreComerciante && comercianteId) {
        document.getElementById('nombre-comerciante').innerHTML = `<i class="fas fa-user-circle"></i> Hola, ${nombreComerciante}`;
        cargarRecomendaciones(); // Cargar recomendaciones
      } else {
        window.location.href = 'login.html';
      }

      fetchProductos(); // Cargar los productos del comerciante
      fetchComercianteInfo(); // Cargar la información del comerciante

      document.getElementById('logout-btn').addEventListener('click', function () {
        sessionStorage.clear();
        window.location.href = 'login.html';
      });

      obtenerTotalProductosSinStock(); // Mostrar total de productos sin stock
    });


    function fetchProductos() {
      const comercianteId = sessionStorage.getItem('Id');
      if (!comercianteId) {
        console.error('Comerciante ID no encontrado en sessionStorage');
        return;
      }

      fetch(`http://127.0.0.1:3000/api/productos?comercianteId=${comercianteId}`)
        .then(response => response.json())
        .then(data => {
          displayProductos(data);
          actualizarDashboard(data);
          simularGraficos(data);
        })
        .catch(err => console.error('Error fetching productos:', err));
    }

    function fetchComercianteInfo() {
      const comercianteId = sessionStorage.getItem('Id');
      if (!comercianteId) {
        console.error('Comerciante ID no encontrado en sessionStorage');
        return;
      }

      fetch(`http://127.0.0.1:3000/api/comerciantes/${comercianteId}`)
        .then(response => response.json())
        .then(data => displayComercianteInfo(data))
        .catch(err => console.error('Error fetching comerciante info:', err));
    }


    function displayComercianteInfo(comerciante) {
      const comercianteInfo = document.getElementById('comerciante-info');
      comercianteInfo.innerHTML = `
        <h3>${comerciante.nombre}</h3>
        <p><strong>Email:</strong> ${comerciante.email}</p>
        <p><strong>Dirección:</strong> ${comerciante.direccion}</p>
        <p><strong>Teléfono:</strong> ${comerciante.telefono}</p>
        <!-- <p><strong>Descripción:</strong> ${comerciante.descripcion}</p>
        <p><strong>Enlace a la tienda:</strong> <a href="${comerciante.enlace_tienda}" target="_blank">${comerciante.enlace_tienda}</a></p>-->
    `;

      // Actualizar el encabezado con el estado de verificación
      const nombreComercianteElement = document.getElementById('nombre-comerciante');
      if (comerciante.verified) {
        nombreComercianteElement.innerHTML = `
            <i class="fas fa-user-circle"></i> Hola, ${comerciante.nombre} 
            <i class="fas fa-check-circle" style="color: green;" title="Cuenta Verificada" data-toggle="tooltip"></i>
        `;
      } else {
        nombreComercianteElement.innerHTML = `
            <i class="fas fa-user-circle"></i> Hola, ${comerciante.nombre} 
            <i class="fas fa-exclamation-circle" style="color: red;" title="Cuenta No Verificada" data-toggle="tooltip"></i>
        `;
      }

      // Re-inicializar tooltips después de modificar el DOM
      $('[data-toggle="tooltip"]').tooltip();
    }


    function displayProductos(productos) {
      const container = document.getElementById('productos-lista');
      container.innerHTML = '';

      if (productos.length === 0) {
        container.innerHTML = `<div class="loader"></div>`;
        return;
      }

      productos.forEach(producto => {
        const item = document.createElement('div');
        item.className = 'product-item';
        item.innerHTML = `
              <img src="${producto.foto_url}" alt="${producto.nombre}" class="product-image">
              <h3>${producto.nombre}</h3>
              <p>${producto.descripcion.substring(0, 60)}...</p>
              <p class="price">₲${Number(producto.precio).toLocaleString('es-PY')}</p>
              <p class="stock ${producto.stock > 0 ? 'in-stock' : 'out-of-stock'}">
                  Stock: ${producto.stock}
              </p>
              <button class="ver-mas" onclick="editarProducto(${producto.id})"><i class="fas fa-edit"></i> Editar Producto</button>
          `;
        container.appendChild(item);
      });
    }

    function actualizarDashboard(productos) {
      const totalProductos = productos.length;
      const productoMasCaro = productos.reduce((max, producto) => producto.precio > max.precio ? producto : max, productos[0] || { nombre: 'N/A', precio: 0 });

      document.getElementById('total-productos').textContent = totalProductos;
      if (productoMasCaro.nombre !== 'N/A') {
        document.getElementById('producto-mas-caro').textContent = `${productoMasCaro.nombre} - ₲${Number(productoMasCaro.precio).toLocaleString('es-PY')}`;
      } else {
        document.getElementById('producto-mas-caro').textContent = 'No hay productos';
      }
    }

    function editarProducto(id) {
      fetch(`http://127.0.0.1:3000/api/productos/${id}`)
        .then(response => response.json())
        .then(data => {
          // Cargar los datos del producto en los campos del modal
          document.getElementById('producto-id').value = data.id;
          document.getElementById('producto-nombre').value = data.nombre;
          document.getElementById('producto-descripcion').value = data.descripcion;
          document.getElementById('producto-precio').value = data.precio;
          document.getElementById('producto-foto').value = data.foto_url;
          document.getElementById('stock').value = data.stock;

          const selectCategoria = document.getElementById('producto-categoria');

          // Intentar seleccionar la categoría guardada
          const categoriaGuardada = data.categoria || "";
          const optionToSelect = Array.from(selectCategoria.options).find(
            option => option.value.toLowerCase() === categoriaGuardada.toLowerCase()
          );

          if (optionToSelect) {
            // Si la opción existe, seleccionarla
            selectCategoria.value = optionToSelect.value;
          } else {
            // Si no coincide, seleccionar la opción por defecto
            selectCategoria.value = "";
            console.warn(`La categoría "${categoriaGuardada}" no coincide con ninguna opción disponible.`);
          }

          $('#editarProductoModal').modal('show');
        })
        .catch(err => console.error('Error al cargar producto para editar:', err));
    }

    function guardarCambiosProducto() {
      const productoId = document.getElementById('producto-id').value;
      const nombre = document.getElementById('producto-nombre').value;
      const descripcion = document.getElementById('producto-descripcion').value;
      const precio = parseFloat(document.getElementById('producto-precio').value);
      const fotoUrl = document.getElementById('producto-foto').value;
      const stock = parseInt(document.getElementById('stock').value);
      const categoria = document.getElementById('producto-categoria').value; // Obtener la categoría seleccionada
      const idComerciante = sessionStorage.getItem('Id');

      fetch(`http://127.0.0.1:3000/api/productos/${productoId}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          nombre,
          descripcion,
          precio,
          foto_url: fotoUrl,
          stock,
          categoria, // Enviar la categoría seleccionada
          id_comerciante: idComerciante,
        }),
      })
        .then(response => response.json())
        .then(data => {
          if (data.producto) {
            alert('Producto actualizado exitosamente');
            $('#editarProductoModal').modal('hide');
            fetchProductos(); // Recargar los productos
          } else {
            alert('Hubo un error al actualizar el producto');
          }
        })
        .catch(err => console.error('Error al actualizar producto:', err));
    }

    function eliminarProducto() {
      const productoId = document.getElementById('producto-id').value;

      if (confirm('¿Estás seguro de que deseas eliminar este producto?')) {
        fetch(`http://127.0.0.1:3000/api/productos/${productoId}`, {
          method: 'DELETE',
        })
          .then(response => {
            if (response.ok) {
              alert('Producto eliminado exitosamente');
              $('#editarProductoModal').modal('hide');
              fetchProductos();
            } else {
              alert('Error al eliminar el producto');
            }
          })
          .catch(err => console.error('Error eliminando producto:', err));
      }
    }

    function redirigirAProductos() {
      window.location.href = 'productos.html';
    }

    function simularGraficos(productos) {
      const nombresProductos = productos.map(p => p.nombre);
      const ventasSimuladas = productos.map(() => Math.floor(Math.random() * 30) + 5);

      // Obtener los valores de las variables CSS
      const primaryColor = getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim();
      const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--accent-color').trim();

      const topProductsCtx = document.getElementById('topProductsChart').getContext('2d');
      new Chart(topProductsCtx, {
        type: 'bar',
        data: {
          labels: nombresProductos,
          datasets: [{
            label: 'Ventas',
            data: ventasSimuladas,
            backgroundColor: accentColor,
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false, // Asegura que el gráfico no mantenga una relación de aspecto fija
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true,
                precision: 0
              }
            }]
          }
        }
      });

      const monthlySalesCtx = document.getElementById('monthlySalesChart').getContext('2d');
      const ventasMensuales = Array.from({ length: 6 }, () => Math.floor(Math.random() * 50000) + 50000);
      new Chart(monthlySalesCtx, {
        type: 'line',
        data: {
          labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio'],
          datasets: [{
            label: 'Ventas en ₲',
            data: ventasMensuales,
            backgroundColor: 'rgba(255, 153, 0, 0.2)',
            borderColor: accentColor,
            borderWidth: 2,
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false, // Asegura que el gráfico no mantenga una relación de aspecto fija
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true,
                callback: function (value) {
                  return '₲' + value.toLocaleString('es-PY');
                }
              }
            }]
          }
        }
      });
    }

    function filtrarProductos() {
      const searchQuery = document.getElementById('search-bar').value.toLowerCase();
      const productos = document.querySelectorAll('.product-item');

      productos.forEach(producto => {
        const nombreProducto = producto.querySelector('h3').textContent.toLowerCase();
        if (nombreProducto.includes(searchQuery)) {
          producto.style.display = 'inline-block';
        } else {
          producto.style.display = 'none';
        }
      });
    }

    function ordenarProductos() {
      const ordenarPor = document.getElementById('ordenar').value;
      const listaProductos = document.getElementById('productos-lista');
      const productos = Array.from(listaProductos.getElementsByClassName('product-item'));

      let productosOrdenados;

      if (ordenarPor === 'nombre') {
        productosOrdenados = productos.sort((a, b) => {
          const nombreA = a.querySelector('h3').textContent.toLowerCase();
          const nombreB = b.querySelector('h3').textContent.toLowerCase();
          return nombreA.localeCompare(nombreB);
        });
      } else if (ordenarPor === 'precio-asc') {
        productosOrdenados = productos.sort((a, b) => {
          const precioA = parseFloat(a.querySelector('.price').textContent.replace(/[^\d]/g, ''));
          const precioB = parseFloat(b.querySelector('.price').textContent.replace(/[^\d]/g, ''));
          return precioA - precioB;
        });
      } else if (ordenarPor === 'precio-desc') {
        productosOrdenados = productos.sort((a, b) => {
          const precioA = parseFloat(a.querySelector('.price').textContent.replace(/[^\d]/g, ''));
          const precioB = parseFloat(b.querySelector('.price').textContent.replace(/[^\d]/g, ''));
          return precioB - precioA;
        });
      }

      listaProductos.innerHTML = '';
      productosOrdenados.forEach(producto => {
        listaProductos.appendChild(producto);
      });
    }
    document.addEventListener('DOMContentLoaded', function () {
      const nombreComerciante = sessionStorage.getItem('nombre');
      if (nombreComerciante) {
        document.getElementById('nombre-comerciante').innerHTML = `Hola, ${nombreComerciante}`;
      } else {
        window.location.href = 'login.html';
      }

      fetchProductos(); // Cargar los productos del comerciante
      fetchComercianteInfo(); // Cargar la información del comerciante

      document.getElementById('logout-btn').addEventListener('click', function () {
        sessionStorage.clear();
        window.location.href = 'login.html';
      });

      // Cargar recomendaciones
      cargarRecomendaciones();
    });

    document.addEventListener('DOMContentLoaded', function () {
      const comercianteId = sessionStorage.getItem('Id');
      if (comercianteId) {
        cargarRecomendaciones(comercianteId);
      } else {
        console.error('Error: comercianteId no encontrado en sessionStorage');
      }
    });


    function almacenarComercianteId(comercianteId) {
      if (comercianteId) {
        sessionStorage.setItem('Id', comercianteId);
      }
    }

    function mostrarTotalProductosSimilares(total) {
      document.getElementById('total-productos-similares').textContent = total;
    }


    // Cargar recomendaciones desde la API
    function cargarRecomendaciones() {
      const comercianteId = sessionStorage.getItem('Id');
      if (!comercianteId) {
        console.error('Error: comercianteId no encontrado en sessionStorage');
        return;
      }

      axios.get(`http://127.0.0.1:5002/recomendaciones?comercianteId=${comercianteId}`)
        .then(response => {
          const recomendaciones = response.data;
          mostrarRecomendaciones(recomendaciones);
          mostrarTotalProductosSimilares(recomendaciones.length);
        })
        .catch(error => {
          console.error('Error al cargar recomendaciones:', error);
        });
    }

    // Mostrar recomendaciones en el carrusel
    function mostrarRecomendaciones(recomendaciones) {
      const swiperWrapper = document.querySelector('#productos-recomendados .swiper-wrapper');
      swiperWrapper.innerHTML = ''; // Limpiar contenido previo

      recomendaciones.forEach(recomendacion => {
        const productoDiv = `
      <div class="swiper-slide">
        <div class="product-item product-item-carousel">
          <img src="${recomendacion.foto_url}" alt="${recomendacion.nombre}" class="product-image">
          <h3>${recomendacion.nombre}</h3>
          <p>${recomendacion.descripcion}</p>
          <p class="price">₲${Number(recomendacion.precio).toLocaleString('es-PY')}</p>
        </div>
      </div>
    `;
        swiperWrapper.innerHTML += productoDiv;
      });

      inicializarSwiper(); // Inicializar Swiper después de cargar los productos
    }

    // Inicializar Swiper
    function inicializarSwiper() {
      new Swiper('#productos-recomendados', {
        slidesPerView: 3, // Número de productos visibles por defecto
        spaceBetween: 3, // Espacio entre los productos
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        autoplay: {
          delay: 2000,
        },
        loop: true,
        breakpoints: {
          // Configuración para pantallas grandes
          1200: {
            slidesPerView: 3,
            spaceBetween: 3,
          },
          // Configuración para pantallas medianas (tablets)
          768: {
            slidesPerView: 3,
            spaceBetween: 3,
          },
          // Configuración para pantallas pequeñas (móviles)
          480: {
            slidesPerView: 1,
            spaceBetween: 5,
          },
        },
      });
    }


    function obtenerTotalProductosSinStock() {
      const sinStockElement = document.getElementById('total-productos-sin-stock');

      const comercianteId = sessionStorage.getItem('Id');
      if (!comercianteId) {
        console.error('Comerciante ID no encontrado en sessionStorage');
        sinStockElement.textContent = 'Error al cargar';
        return;
      }

      fetch(`http://127.0.0.1:3000/api/productos/sin-stock?comercianteId=${comercianteId}`)
        .then(response => response.json())
        .then(data => {
          sinStockElement.textContent = data.total;
        })
        .catch(error => {
          console.error('Error al cargar productos sin stock:', error);
          sinStockElement.textContent = 'Error al cargar';
        });
    }

    // Ejecutar al cargar la página
    document.addEventListener('DOMContentLoaded', function () {
      obtenerTotalProductosSinStock();
    });

  </script>
</body>

</html>