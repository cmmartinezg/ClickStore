<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Click Store - Usuario</title>
  <!-- CSS Parte Inicio -->
  <link rel="stylesheet" type="text/css" href="js/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="css/font-awesome/css/font-awesome.min.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans' type='text/css'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" type="text/css" href="css/index-usu.css" />
<!-- CSS de Owl Carousel -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">

  <!-- CSS Parte Fin -->
  <style>
#ordenar {
  width: 200px; 
  padding: 10px; 
  border-radius: 5px;
}

/* --- Estilo para el segundo encabezado --- */
.secondary-header {
  background-color: #ffffff; 
  padding: 10px 20px; 
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
}

.categories-container {
  display: flex;
  align-items: center;
}

.categories-btn {
  background: transparent; 
  border: none; 
  font-size: 18px; 
  color: #000000; 
  cursor: pointer;
  display: flex; 
  align-items: center; 
}


.categories-btn i {
  margin-right: 7px; 
}

/* --- (Ofertas del Día) --- */
.secondary-title {
  font-size: 18px; 
  color: #000000;
  display: flex; 
  align-items: center;
}

.secondary-title i {
  margin-right: 6px; 
}

/* ---(contenedor desplegable) --- */
.categories-dropdown {
  background-color: #ffffff; 
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  border-radius: 0px; 
  padding: 15px; 
  position: absolute; 
  width: 300px; 
  z-index: 1000; 
  margin-top: 3px; 
}


.categories-dropdown ul {
  list-style: none; 
  padding: 0; 
}

/* --- Elemento de cada categoría dentro de la lista --- */
.categories-dropdown li {
  padding: 10px 0; 
  font-size: 16px; 
  color: #333; 
  display: flex; 
  align-items: center; 
}

/* --- Icono dentro de cada categoría --- */
.categories-dropdown li i {
  margin-right: 12px; 
}

/* --- Lista de categorías --- */
.categories-list li {
  padding: 15px 10px; 
  font-size: 16px; 
  color: #333; 
  border-bottom: 1px solid #eee; 
  display: flex; 
  justify-content: space-between; 
  align-items: center; 
  cursor: pointer; 
}

/* --- Estilo del contenedor al pasar el mouse por encima --- */
.categories-list li:hover {
  background-color: #f7f7f7; 
}

/* --- Icono de flecha para subcategorías --- */
.arrow-icon {
  font-size: 16px; 
  color: #888; 
}

/* --- Estilo del botón de categorías principal--- */
.categories-button {
  background-color: #ffc107; 
  border: 19px; 
  padding: 10px 15px; 
  border-radius: 5px;
  cursor: pointer; 
  font-size: 19px; 
  color: #000000; 
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
}


.categories-button:hover {
  background-color: #e0a800; 
}


.categories-button i {
  margin-left: 5px; 
}
/* Contenedor principal */
.categorias-contenedor {
  background-color: #f9f9f9; 
  padding: 20px 0;
  border-bottom: 1px solid #e5e5e5; 
}

/* Título del contenedor */
.categorias-titulo {
  text-align: left;
  padding-left: 20px;
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 30px;
  color: #333;
}

/* Estilo de la cuadrícula de categorías */
.categorias-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center; 
  gap: 20px; 
  margin-bottom: 30px;
  margin-top: 20px; 
}

/* Estilo de cada categoría */
.categoria-item {
  background-color: white;
  border: 1px solid #e5e5e5;
  border-radius: 10px;
  padding: 20px;
  width: 150px;
  text-align: center;
  transition: all 0.3s ease;
}

.categoria-item i {
  font-size: 36px;
  margin-bottom: 10px;
  color: #ff6600; 
}

.categoria-item span {
  display: block;
  font-size: 16px;
  font-weight: 500;
  color: #333;
}

/* Efecto hover */
.categoria-item:hover {
  border-color: #ff6600;
  background-color: #fff7e6; 
}

@media (max-width: 768px) {
  .categoria-item {
    width: 120px; 
  }
}

.filter-container {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 15px; 
  margin-bottom: 20px;
}

.filter-container input.form-control,
.filter-container select.form-control {
  width: auto;
  min-width: 200px; 
}


.sort-container {
  display: flex;
  align-items: center;
}

.sort-container label {
  margin-right: 10px;
  font-weight: bold;
  color: #333;
}

/* Estilo para la lista de productos */
.productos-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 20px; 
  margin-top: 20px;
}

.main-container {
  display: flex; 
  justify-content: space-between;
  margin: 20px;
}

/* Contenedor de Filtros */
.filters-container {
  width: 20%; 
  padding: 15px;
  background: #f8f8f8;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
}

.filters-container h3 {
  color: #ff9500;
  font-size: 22px;
  margin-bottom: 20px;
}

.filter-section {
  margin-bottom: 20px;
}

.filter-section label {
  font-weight: bold;
  display: block;
  margin-bottom: 10px;
}

/* Estilo de la barra de rango */
#price-range {
  width: 100%;
}

ul {
  list-style-type: none;
  padding: 0;
}

ul li {
  margin-bottom: 10px;
}

ul li input {
  margin-right: 5px;
}

/* Contenedor de Productos */
.products-container {
  width: 75%; 
  padding: 20px;
  background: #ffffff;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
}

.productos-titulo {
  color: #ff9500;
  font-size: 28px;
  margin-bottom: 20px;
  text-align: left;
}

.filter-container {
  display: flex;
  width: 989px;
  justify-content: flex-start;
  align-items: center;
  margin-bottom: 20px;
}

.filter-container input, .filter-container select {
  margin-right: 15px;
  width: 200px;
}

/* Productos */
#productos-lista {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
}

.product-item {
  border: 1px solid #ddd;
  border-radius: 10px;
  margin: 15px;
  padding: 15px;
  width: calc(33% - 30px); 
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.product-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}
#productos-lista {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}

.product-item {
  flex: 0 0 30%; 
  margin: 15px 0; 
}

/* Estilo del pie de página */
footer #main-footer {
    background-color: #333;
    color: #fff;
    text-align: center;  
    padding: 20px 0;   
    font-family: 'Open Sans', sans-serif;
    font-size: 14px;
}

footer {
      background-color: #333;
      color: white;
      padding: 20px;
      text-align: center;
      position: relative;
      bottom: 0;
      width: 100%;
    }

    footer a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    footer a:hover {
      text-decoration: underline;
    }

/* Ajustes adicionales para dispositivos más pequeños */
@media (max-width: 768px) {
    footer#main-footer {
        font-size: 12px; 
    }
}




.wrapper-wide {
  width: 100%;
}

/* Contenedor principal para la página */
.main-content {
  display: flex;
  padding: 0;
  justify-content: space-between;
  margin: 0;
  max-width: 100%;
  box-sizing: border-box;
}

/* Imágenes pequeñas a los lados del carrusel */
.small-images {
  width: 20%;
  display: flex;
  flex-direction: column;
  gap: 0px;
  margin: 0;
}

.image-box {
  width: 100%;
  height: 150px;
  overflow: hidden;
}

.image-box img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Carrusel */
.slider-container {
  width: 60%;
  max-width: 100%;
  overflow: hidden;
  margin: 0;
  padding: 0;
}

.owl-carousel .item {
  width: 100%;
  height: 450px;
  margin: 0;
}

.owl-carousel .item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  margin: 0;
  padding: 0;
}

/* Media Queries para ajustar en pantallas más grandes */
@media (min-width: 1024px) {
  .main-content {
    flex-direction: row;
  }
}

/* Media Queries para pantallas pequeñas */
@media (max-width: 768px) {
  .main-content {
    flex-direction: column;
    align-items: center;
  }

  .small-images {
    width: 100%;
    flex-direction: row;
    justify-content: space-around;
    height: auto;
  }

  .slider-container {
    width: 100%;
  }

  .owl-carousel .item {
    height: 300px;
  }
}



/* Sombra cuando el mouse pasa por encima de las imágenes */
.image-box img, .owl-carousel .item img {
  transition: box-shadow 0.3s ease;
}

.image-box img:hover, .owl-carousel .item img:hover {
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.5);
}
.owl-nav {
  background-color: transparent; /* Fondo transparente */
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 100%;
  display: flex;
  justify-content: space-between; /* Distribuir las flechas a los lados */
  z-index: 100; /* Asegúrate de que las flechas estén por encima de las imágenes */
}

.owl-nav button {
  background: none; /* Sin fondo */
  border: none; /* Sin borde */
  color: white; /* Color de las flechas */
  font-size: 30px; /* Tamaño de las flechas */
}

.owl-nav button:hover {
  opacity: 0.8; /* Efecto de hover */
}


.dropdown-menu {
    position: absolute;
    top: 100%; /* Aparece debajo del header */
    left: 4;
    background-color: #392e2e;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    border-radius: 3px;
    display: none; /* Oculto por defecto */
    z-index: 1000; /* Aparece sobre otros elementos */
}

.dropdown:hover .dropdown-menu {
    display: block; /* Mostrar al hacer hover */
}

/* Estilo del título */
.productos-titulo, .category-title {
    text-align: left;
    font-size: 30px;
    margin-top: 5px;
    margin-left: 10px;
    font-weight: bold;
}

/* Estilo del carrusel */
.carousel {
    position: relative;
    flex: 1 1 calc(60% - 20px);
    width: 500%; 
    max-width: 900px;
    overflow: hidden;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    
}

/* Imágenes del carrusel */
.carousel-images {
    display: flex;
    transition: opacity 1s ease-in-out;
    height: 100%; 
    width: 210%; 
    position: relative;
  
}

.carousel-images img {
    width: 50%; 
    object-fit: cover;
    display: none;
}

.carousel-images img.active {
    display: block; 
}

.arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
}

.arrow-left {
    left: 10px;
}

.arrow-right {
    right: 10px;
}

.arrow:hover {
    background-color: rgba(0, 0, 0, 0.8);
}


/* Estilo del título de categoría */
.category-title {
    font-size: 24px;
    font-weight: bold;
    color: #555;
    margin: 0;
}
/* Media query para dispositivos móviles */
@media (max-width: 768px) {
    .header {
        flex-direction: column;
        align-items: center;
        padding: 10px 20px;
    }

    .search-bar {
        width: 100%; 
        margin-top: 10px;
    }

    .nav-links {
        flex-direction: row; 
        justify-content: center;
        gap: 20px;
        margin-top: 10px;
    }
}
.icon-container {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
}

.icon-image {
    width: 29px; 
    height: auto;
}

.icon-container span {
    position: absolute;
    top: -5px;
    right: -5px;
    color: #000;
    font-size: 12px;
    font-weight: bold;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}
/* Estilo del título de recomendados */
.section-title {
    font-size: 20px;
    margin-bottom: 10px;
    text-align: left;
    font-weight: bold;
    color: #555;
    margin: 0;
}

.contenedor-recomendaciones {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
}

/* Estilo para la sección de recomendaciones */
.recommended-section {
  margin: 40px 0;
  padding: 20px;
  background-color: #f9f9f9;
}

.recommended-title {
  font-size: 24px;
  font-weight: bold;
  margin-bottom: 20px;
  color: #333;
  text-align: center;
}

/* Contenedor de productos */
.recommended-products {
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}


/* Estilo para cada producto */
.recommended-product {
  width: 200px;
  background-color: #fff;
  border: 1px solid #ffffff;
  border-radius: 5px;
  overflow: hidden;
  text-align: center;
  transition: box-shadow 0.3s ease;
  display: flex;
  flex-direction: column; 
  justify-content: space-between; 
  padding-bottom: 10px;
}

.recommended-product:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

/* Imagen del producto */
.product-image {
  width: 100%;
  height: 180px;
  margin-top: 19%;
  object-fit: cover;
}

/* Información del producto */
.product-info {
  padding: 5px;
}

.product-name {
  font-size: 16px;
  font-weight: bold;
  color: #333;
  margin: 5px 0;
}

.product-description {
  font-size: 12px;
  color: #777;
  margin: 5px 0;
  height: 50px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.product-price {
  font-size: 15px;
  color: #e74c3c;
  font-weight: bold;
  margin-top: 30px;
}

/* Estilo para el botón Ver detalles */
.view-details-button {
  display: block;
  margin-top: 50px;
  padding: 10px 20px;
  background-color: #000000;
  color: white;
  text-decoration: none;
  border-radius: 5px;
  font-size: 16px;
  transition: background-color 0.3s ease;
}


.view-details-button:hover {
    background-color: #e67a56;
}

/* Estilo general del pie de página */
#main-footer {
    background: #333;
    color: #fff;
    padding: 40px 0;
    font-family: 'Open Sans', sans-serif;
}

.footer-container {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Sección del pie de página */
.footer-section {
    flex: 1;
    margin: 0 20px;
}

.footer-section h4 {
    font-size: 18px;
    margin-bottom: 15px;
    color: #ffc107;
}

.footer-section p,
.footer-section ul {
    font-size: 14px;
    line-height: 1.6;
}

.footer-section ul {
    list-style: none;
    padding: 0;
}

.footer-section ul li {
    margin-bottom: 10px;
}

.footer-section ul li a {
    text-decoration: none;
    color: #ccc;
    transition: color 0.3s ease;
}

.footer-section ul li a:hover {
    color: #ffc107;
}

/* Estilos de los íconos de contacto */
.footer-section ul li i {
    margin-right: 10px;
    color: #ffc107;
}

/* Estilo del contenedor inferior */
.footer-bottom {
    background: #222;
    color: #aaa;
    text-align: center;
    padding: 15px 20px;
    margin-top: 30px;
    font-size: 14px;
}

.footer-bottom a {
    color: #ffc107;
    text-decoration: none;
    margin-left: 5px;
}

.footer-bottom a:hover {
    text-decoration: underline;
}

  </style>
</head>
<body>

    <!-- Header -->
    <header class="header">
      <div class="logo">
        <a href="index.html"><img class="img-responsive" src="image/logo-nr.png" title="Click Store" alt="Click Store" /></a>
      </div>
      <div class="search-bar">
        <select id="category-select">
            <option value="index-usuario.html">Todos</option>
            <option value="electronica.html">Electrónica</option>
            <option value="informatica.html">Informática</option>
            <option value="ropa.html">Ropa</option>
            <option value="automoviles.html">Automóviles</option>
            <option value="belleza.html">Belleza</option>
        </select>
        <input id="filter_name" type="text" name="search" placeholder="Buscar Producto" oninput="filtrarProductosEnTiempoReal()" />
        <button type="button" id="search-button" class="button-search" onclick="buscarProductoEnBackend()">
            <i class="fa fa-search"></i>
        </button>
        <div id="autocomplete-list"></div>
    </div>
    
        
      <div class="nav-links">
        <span id="welcome-message"></span>

     <a href="wishlist.html" class="icon-link">
            <div class="icon-container">
                <img src="image/like.png" alt="Lista de deseos" class="icon-image">
                <span id="wishlist-count">0</span> 
            </div>
        </a>
        <a href="cart.html" class="icon-link">
            <div class="icon-container">
                <img src="image/carrito.png" alt="Carrito" class="icon-image">
                <span id="cart-count">0</span> 
            </div>
        </a>
  </div>
  </header> 

<!-- Contenedor principal --> 
<div class="main-content">
  <!-- Contenedor de imágenes pequeñas a la izquierda -->
  <div class="small-images">
    <div class="image-box">
        <a href="electronica.html"><img src="image/imag(5).jpg" alt="Producto 1"></a>
    </div>
    <div class="image-box">
      <a href="ropa.html"><img src="image/boxRopa.png" alt="Producto 3"></a>
  </div>
    <div class="image-box">
        <a href="informatica.html"><img src="image/boxinfo.png" alt="Producto 2"></a>
    </div>
</div>
  <div class="slider-container">
    <div id="carousel-example" class="owl-carousel owl-theme">
        <div class="item"><img src="image/elect.png" alt="Carrusel 1"></div>
        <div class="item"><img src="image/c5.jpg" alt="Carrusel 2"></div>
        <div class="item"><img src="image/c22.jpg" alt="Carrusel 3"></div>
        <div class="item"><img src="image/c19.jpg" alt="Carrusel 4"></div>
    </div>
</div>

  <!-- Contenedor de imágenes pequeñas a la derecha -->
  <div class="small-images">
    <div class="image-box">
      <a href="index-usuario.html"><img src="image/boxTodos.png" alt="Producto 6"></a>
  </div>  
    <div class="image-box">
        <a href="belleza.html"><img src="image/boxmaqui.png" alt="Producto 5"></a>
    </div> 
    <div class="image-box">
      <a href="automoviles.html"><img src="image/box2.jpg" alt="Producto 4"></a>
  </div>
</div>
</div>
<div class="category-section"> 
  <div class="category-item" onclick="redirigirCategoria('electronica.html')">
      <div class="image-circle">
          <img src="image/elf.png" alt="Electrónica">
      </div>
      <p>Electrónica</p>
  </div>
  <div class="category-item" onclick="redirigirCategoria('informatica.html')">
      <div class="image-circle">
          <img src="image/informatica.png" alt="Informática">
      </div>
      <p>Informática</p>
  </div>
  <div class="category-item" onclick="redirigirCategoria('ropa.html')">
      <div class="image-circle">
          <img src="image/ropaf.png" alt="Ropa">
      </div>
      <p>Ropa</p>
  </div>
  <div class="category-item" onclick="redirigirCategoria('automoviles.html')">
      <div class="image-circle">
          <img src="image/autf.png" alt="Automóviles">
      </div>
      <p>Automóviles</p>
  </div>
  <div class="category-item" onclick="redirigirCategoria('belleza.html')">
      <div class="image-circle">
          <img src="image/bellez.png" alt="Belleza">
      </div>
      <p>Belleza</p>
  </div>
</div>
                           <!-- Novedades  -->
<div class="contenedor-principal">
  <!-- Sección Belleza -->
    <div class="seccion-productos novedades-belleza"> 
      <h2>Novedades en Belleza</h2>
      <div class="productos-grid">
        <div class="producto-item">
          <a href="product.html?id=444">
            <img src="image/belleza1.png" alt="Maquillaje">
            <p>Maquillaje</p>
          </a>
        </div>
          <div class="producto-item"> 
            <a href="product.html?id=447">     
              <img src="image/brochas1.png" alt="Brochas">
              <p>Brochas</p>
            </a>
          </div>
          <div class="producto-item">
          <a href="product.html?id=479">    
              <img src="image/esponja1.png" alt="Esponjas">
              <p>Esponjas</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=480">   
              <img src="image/espejo1.png" alt="Espejos">
              <p>Espejos</p>
            </a>
          </div>
      </div>
      <a href="belleza.html" class="enlace-mas">Compra lo último en belleza</a>
  </div>

  <!-- Sección Informática -->
  <div class="seccion-productos explora-informatica">
      <h2>Explora Informática</h2>
      <div class="productos-grid">
          <div class="producto-item">
            <a href="product.html?id=416"> 
              <img src="image/notebook1.png" alt="Laptops">
              <p>Laptops</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=464">
              <img src="image/teclado1.png" alt="Teclados">
              <p>Teclados</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=462">
              <img src="image/monitor.png" alt="Monitores">
              <p>Monitores</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=481">
              <img src="image/auricular1.png" alt="Auriculares">
              <p>Auriculares</p>
            </a>
          </div>
      </div>
      <a href="informatica.html" class="enlace-mas">Explorar más en informática</a>
  </div>

  <!-- Sección Electrónica -->
  <div class="seccion-productos descubre-electronica">
      <h2>Descubre Electrónica</h2>
      <div class="productos-grid">
          <div class="producto-item">
            <a href="product.html?id=456">
              <img src="image/telefono1.png" alt="Teléfonos">
              <p>Teléfonos</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=482">
              <img src="image/televisor1.png" alt="Televisores">
              <p>Televisores</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=483">
              <img src="image/reloj1.png" alt="Relojes">
              <p>Relojes</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=484">
              <img src="image/camara1.png" alt="Cámaras">
              <p>Cámaras</p>
            </a>
          </div>
      </div>
      <a href="electronica.html" class="enlace-mas">Ver más en electrónica</a>
  </div>

  <!-- Sección Ropa -->
  <div class="seccion-productos explora-ropa">
      <h2>Explora Ropa</h2>
      <div class="productos-grid">
          <div class="producto-item">
            <a href="product.html?id=485">
              <img src="image/camisa1.png" alt="Camisas">
              <p>Camisas</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=486">
              <img src="image/pantalon1.png" alt="Pantalones">
              <p>Pantalones</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=487">
              <img src="image/zapatos1.png" alt="Zapatos">
              <p>Zapatos</p>
            </a>
          </div>
          <div class="producto-item">
            <a href="product.html?id=488">
              <img src="image/accesorio1.png" alt="Accesorios">
              <p>Accesorios</p>
            </a>
          </div>
      </div>
      <a href="ropa.html" class="enlace-mas">Explora más en ropa</a>
  </div>
</div>


<!-- Contenedor de Recomendados -->
<div class="recomendaciones">
  <h2 class="recomendaciones-title">Recomendados para ti</h2>

  <!-- Electrónica -->
  <div class="recomendaciones-categoria">
      <h3 class="categoria-titulo">Electrónica</h3>
      <div id="productos-recomendados-electrónica" class="productos-recomendados-list"></div>
  </div>

  <!-- Belleza -->
  <div class="recomendaciones-categoria">
      <h3 class="categoria-titulo">Belleza</h3>
      <div id="productos-recomendados-belleza" class="productos-recomendados-list"></div>
  </div>

  <!-- Informática -->
  <div class="recomendaciones-categoria">
      <h3 class="categoria-titulo">Informática</h3>
      <div id="productos-recomendados-informática" class="productos-recomendados-list"></div>
  </div>

  <!-- Ropa -->
  <div class="recomendaciones-categoria">
      <h3 class="categoria-titulo">Ropa</h3>
      <div id="productos-recomendados-ropa" class="productos-recomendados-list"></div>
  </div>

  <!-- Automóviles -->
  <div class="recomendaciones-categoria">
      <h3 class="categoria-titulo">Automóviles</h3>
      <div id="productos-recomendados-automóviles" class="productos-recomendados-list"></div>
  </div>
</div>



    <!-- Botón de Subir Artículo (visible solo para comerciantes) -->
    <div class="container" id="comerciante-section" style="display: none;">
      <button class="btn btn-primary" id="productos-btn">Subir Artículo</button>
    </div>

    <footer id="main-footer">
      <div class="footer-container">
          <!-- Contenedor de información de la compañía -->
          <div class="footer-section">
              <h4>Sobre Nosotros</h4>
              <p>Click Store es una tienda en línea dedicada a ofrecer productos de calidad y un servicio excepcional a nuestros clientes. Nuestro objetivo es satisfacer todas tus necesidades con la mejor experiencia de compra.</p>
          </div>
  
          <!-- Contenedor de enlaces rápidos -->
          <div class="footer-section">
              <h4>Enlaces Rápidos</h4>
              <ul>
                  <li><a href="#">Inicio</a></li>
                  <li><a href="#">Tienda</a></li>
                  <li><a href="#">Acerca de</a></li>
                  <li><a href="#">Contacto</a></li>
                  <li><a href="#">Política de Privacidad</a></li>
              </ul>
          </div>
          <!-- Contenedor de contacto -->
          <div class="footer-section">
              <h4>Contáctanos</h4>
              <ul>
                  <li><i class="fa fa-map-marker"></i> Asunción, Paraguay</li>
                  <li><i class="fa fa-phone"></i> +595 21 123 4567</li>
                  <li><i class="fa fa-envelope"></i> contacto@clickstore.com</li>
              </ul>
          </div>
      </div>
      <div class="footer-bottom">
          <p>&copy; 2024 Click Store. Todos los derechos reservados | <a href="#">Términos y Condiciones</a></p>
      </div>
  </footer>
<!--Footer Fin-->
    <!-- Parte JS Inicio -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="js/bootstrap/js/bootstrap.min.js"></script>
    <script src="js/jquery.easing-1.3.min.js"></script>
    <script src="js/jquery.dcjqaccordion.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/custom.js"></script>
    <script src="js/api.js"></script> <!-- Incluir api.js aquí -->
    <!-- JS de Owl Carousel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

    <!-- Parte JS Fin -->

    <script>
      // Mostrar mensaje de inicio de sesión o registro exitoso
      document.addEventListener('DOMContentLoaded', function () {
        const params = new URLSearchParams(window.location.search);
        if (params.has('mensaje')) {
          alert(params.get('mensaje'));
        }

        // Mostrar botón "Subir Artículo" si el usuario es comerciante
        const tipoUsuario = sessionStorage.getItem('tipoUsuario');
        if (tipoUsuario === 'comerciante') {
          document.getElementById('comerciante-section').style.display = 'block';
          document.getElementById('productos-nav').style.display = 'block'; // Mostrar botón en el menú
        }
        fetchProductos();
      });

      function fetchProductos() {
        fetch('https://tcc-api-nodejs.onrender.com/api/productos')
          .then(response => response.json())
          .then(data => {
            displayProductos(data);
            populateAutocomplete(data);
          })
          .catch(err => console.error('Error fetching productos:', err));
      }

      function displayProductos(productos) {
        const container = document.getElementById('productos-lista');
        container.innerHTML = '';
        productos.forEach(producto => {
          const item = document.createElement('div');
          item.className = 'product-item';
          item.innerHTML = `
            <img src="${producto.foto_url}" alt="${producto.nombre}" class="product-image">
            <h3>${producto.nombre}</h3>
            <p>${producto.descripcion.substring(0, 60)}...</p>
            <p class="price">₲${Number(producto.precio).toLocaleString('es-PY')}</p>
            <div class="action-buttons">
                <button onclick="addToWishlist(${producto.id}, 1)" class="wishlist-button">
                    <i class="fa fa-heart"></i>
                </button>
                <button onclick="addToCart(${producto.id}, 1)" class="cart-button">
                    <i class="fa fa-shopping-cart"></i>
                </button>
            </div>
            <a href="product.html?id=${producto.id}" class="ver-mas">Ver más</a>
        `;
          container.appendChild(item);
        });
      }

      function populateAutocomplete(productos) {
        const list = document.getElementById('autocomplete-list');
        list.innerHTML = ''; // Limpiar el contenido previo
        if (productos.length === 0) {
          list.style.display = 'none';
          return;
        }
        productos.forEach(producto => {
          const item = document.createElement('div');
          item.className = 'autocomplete-item';
          item.innerHTML = `
            <img src="${producto.foto_url}" alt="${producto.nombre}">
            <h4>${producto.nombre}</h4>
            <span class="price">₲${Number(producto.precio).toLocaleString('es-PY')}</span>
          `;
          item.addEventListener('click', () => {
            document.getElementById('filter_name').value = producto.nombre;
            list.style.display = 'none';
            performSearch();
          });
          list.appendChild(item);
        });
        list.style.display = 'block'; // Mostrar el contenedor de resultados
      }

      function filterProductos() {
        const query = document.getElementById('filter_name').value.toLowerCase();
        if (query === "") {
          document.getElementById('autocomplete-list').style.display = 'none';
          return;
        }
        fetch('https://tcc-api-nodejs.onrender.com/api/productos')
          .then(response => response.json())
          .then(data => {
            const filtered = data.filter(producto => producto.nombre.toLowerCase().includes(query));
            populateAutocomplete(filtered);
          })
          .catch(err => console.error('Error filtering productos:', err));
      }

      function performSearch() {
        const query = document.getElementById('filter_name').value.toLowerCase();
        if (query) {
          filterProductos();
        } else {
          fetchProductos();
        }
      }

      document.addEventListener('DOMContentLoaded', function () {
        const userId = 1;
        updateWishlistCount(userId);
        updateCartCount(userId);
      });

      // Función para actualizar el contador de la lista de deseos
      function updateWishlistCount(userId) {
        fetch(`/api/wishlist/${userId}`)
          .then(response => response.json())
          .then(data => {
            document.getElementById('wishlist-count').innerText = data.length;
          })
          .catch(error => console.error('Error:', error));
      }

      // Función para actualizar el contador del carrito
      function updateCartCount(userId) {
        fetch(`/api/cart/${userId}`)
          .then(response => response.json())
          .then(data => {
            document.getElementById('cart-count').innerText = data.length;
          })
          .catch(error => console.error('Error:', error));
      }

      // Llamar a estas funciones cuando se cargue la página
      document.addEventListener('DOMContentLoaded', function () {
        const userId = 1; // Aquí debes poner el ID del usuario actual
        updateWishlistCount(userId);
        updateCartCount(userId);
      });

      // Función para agregar un producto a la lista de deseos
      function addToWishlist(productId, userId) {
        fetch('/api/wishlist', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ id_usuario: userId, id_producto: productId }),
        })
          .then(response => response.json())
          .then(data => {
            console.log('Producto agregado a la lista de deseos:', data);
            updateWishlistCount(userId);
          })
          .catch(error => console.error('Error:', error));
      }

      // Función para agregar un producto al carrito
      function addToCart(productId, userId) {
        fetch('/api/cart', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ id_usuario: userId, id_producto: productId }),
        })
          .then(response => response.json())
          .then(data => {
            console.log('Producto agregado al carrito:', data);
            updateCartCount(userId);// Actualiza el contador después de agregar el producto
          })
          .catch(error => console.error('Error:', error));
      }

      // Cerrar sugerencias al hacer clic fuera de ellas
      document.addEventListener('click', function (e) {
        const target = e.target;
        if (!target.closest('.search-bar')) {
          document.getElementById('autocomplete-list').style.display = 'none';
        }
      });

      function toggleDropdown() {
  var dropdown = document.getElementById("categories-dropdown");
  if (dropdown.style.display === "none") {
    dropdown.style.display = "block";
  } else {
    dropdown.style.display = "none";
  }
}
// Función para filtrar productos en "Todos los Productos"
function filtrarProductosTodos() {
  const input = document.getElementById("search-bar-todos").value.toLowerCase();
  const productos = document.querySelectorAll("#productos-lista .product-item");

  productos.forEach(producto => {
    const nombreProducto = producto.querySelector("h3").innerText.toLowerCase();
    if (nombreProducto.includes(input)) {
      producto.style.display = "inline-block"; 
    } else {
      producto.style.display = "none"; 
    }
  });
}

// Función para ordenar productos en "Todos los Productos"
function ordenarProductosTodos() {
  const productosContainer = document.getElementById("productos-lista");
  const productos = Array.from(productosContainer.querySelectorAll(".product-item"));
  const criterio = document.getElementById("ordenar-todos").value;

  productos.sort((a, b) => {
    const nombreA = a.querySelector("h3").innerText;
    const nombreB = b.querySelector("h3").innerText;
    const precioA = parseFloat(a.querySelector(".price").innerText.replace(/[^\d]/g, ""));
    const precioB = parseFloat(b.querySelector(".price").innerText.replace(/[^\d]/g, ""));

    if (criterio === "nombre") {
      return nombreA.localeCompare(nombreB);
    } else if (criterio === "precio-asc") {
      return precioA - precioB;
    } else if (criterio === "precio-desc") {
      return precioB - precioA;
    }
  });

  // Reordenar los productos en el contenedor
  productos.forEach(producto => productosContainer.appendChild(producto));
}
let productos = []; // Lista de productos cargados desde la base de datos

// Función para cargar productos (modificar cuando funcione el registro de comerciante porque es de prueba)
function cargarProductos() {
  productos = [
    { nombre: "Celular Samsung", precio: 2000000, comercio: "Nueva Americana", categoria: "Celulares" },
    { nombre: "Laptop Dell", precio: 5000000, comercio: "Nueva Americana", categoria: "Informática" },
    { nombre: "Tv Samsung", precio: 1000000, comercio: "ElectroHouse", categoria: "Tv" },
  ];
  mostrarProductos(productos); // Mostrar todos los productos inicialmente
}

// Función para mostrar los productos en el contenedor
function mostrarProductos(listaProductos) {
  const contenedorProductos = document.getElementById("productos-lista");
  contenedorProductos.innerHTML = ""; 

  listaProductos.forEach((producto) => {
    const divProducto = document.createElement("div");
    divProducto.classList.add("product-item");
    divProducto.innerHTML = `
      <img src="image-placeholder.png" class="product-image" alt="${producto.nombre}">
      <h3>${producto.nombre}</h3>
      <p>Comercio: ${producto.comercio}</p>
      <p class="price">₲${producto.precio.toLocaleString()}</p>
      <button class="ver-mas">Ver más</button>
    `;
    contenedorProductos.appendChild(divProducto);
  });
}

// Función para filtrar productos
function filtrarProductos() {
  const textoBusqueda = document.getElementById("search-bar").value.toLowerCase();
  const productosFiltrados = productos.filter(producto =>
    producto.nombre.toLowerCase().includes(textoBusqueda)
  );
  mostrarProductos(productosFiltrados);
}

// Función para ordenar productos
function ordenarProductos() {
  const criterioOrden = document.getElementById("ordenar").value;
  let productosOrdenados = [...productos];

  if (criterioOrden === "nombre") {
    productosOrdenados.sort((a, b) => a.nombre.localeCompare(b.nombre));
  } else if (criterioOrden === "precio-asc") {
    productosOrdenados.sort((a, b) => a.precio - b.precio);
  } else if (criterioOrden === "precio-desc") {
    productosOrdenados.sort((a, b) => b.precio - a.precio);
  } else if (criterioOrden === "todos los prod") {
    mostrarProductos(productos); // Mostrar todos los productos si se selecciona "Todos"
    return; // Terminar la función
  }

  mostrarProductos(productosOrdenados);
}

// Llamar a la función para cargar los productos inicialmente
window.onload = () => {
  cargarProductos();
  filtrarPorComercio(); 
};


// Función para filtrar productos por comercio
function filtrarPorComercio() {
  const comercioSeleccionado = document.getElementById("comercio-select").value;
  if (comercioSeleccionado === "") {
    mostrarProductos(productos); // Mostrar todos los productos si no se selecciona ningún comercio
  } else {
    const productosFiltrados = productos.filter(producto => producto.comercio === comercioSeleccionado);
    mostrarProductos(productosFiltrados);
  }
}


// Función para cambiar la cantidad de productos a mostrar
function cambiarCantidadProductos() {
  const cantidad = parseInt(document.getElementById("categoria-select").value);
  mostrarProductos(productos.slice(0, cantidad)); // Mostrar solo la cantidad seleccionada de productos
}

// Función para cargar los nombres de los comerciantes en el select
function cargarComerciantes() {
  fetch('/ruta_de_tu_api/comerciantes/nombres')
    .then(response => response.json())
    .then(nombres => {
      const comercioSelect = document.getElementById("comercio-select");
      comercioSelect.innerHTML = '<option value="">Todos</option>'; // Opción predeterminada

      nombres.forEach(comerciante => {
        const option = document.createElement('option');
        option.value = comerciante.nombre;
        option.textContent = comerciante.nombre;
        comercioSelect.appendChild(option);
      });
    })
    .catch(error => console.error('Error al cargar los comerciantes:', error));
}

// Llamar a la función al cargar la página
window.onload = () => {
  cargarProductos();
  cargarComerciantes(); // Cargar los nombres de los comerciantes en el select
};

function filtrarPorPrecio() {
  // Obtener el valor máximo y mínimo del input de rango
  const maxPrecio = parseInt(document.getElementById("price-range").value, 10);
  
  // Mostrar el valor seleccionado en la etiqueta de precio
  document.getElementById("price-label").innerText = `Hasta ₲${maxPrecio.toLocaleString()}`;

  // Filtrar productos por el rango de precios seleccionado
  const productosFiltrados = productos.filter(producto => producto.precio <= maxPrecio);

  mostrarProductos(productosFiltrados);
}
async function registrarUsuario(event) {
    event.preventDefault();

    const nombre = document.getElementById('input-usuario').value;
    const email = document.getElementById('input-email').value;
    const contrasena = document.getElementById('input-password').value;
    const direccion = document.getElementById('input-direccion').value;
    const telefono = document.getElementById('input-telefono').value;

    const data = {
        nombre,
        email,
        contrasena,
        direccion,
        telefono
    };

    try {
        const response = await fetch('https://tcc-api-nodejs.onrender.com/api/usuarios', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });

        if (response.ok) {
            const responseData = await response.json();

            // Guardar las variables de sesión para el usuario
            sessionStorage.setItem('nombre', nombre);
            sessionStorage.setItem('Id', responseData.id);
            sessionStorage.setItem('tipo', "usuario");

            Swal.fire({
                title: '¡Registrado!',
                text: 'Usuario registrado exitosamente',
                icon: 'success',
                confirmButtonText: 'Aceptar'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = 'index-usuario.html'; // Redirigir a la página de usuario
                }
            });
        } else if (response.status === 409) {
            Swal.fire({
                title: 'Error',
                text: 'El email ya está registrado. Por favor, utiliza otro email.',
                icon: 'error',
                confirmButtonText: 'Aceptar'
            });
        } else {
            const errorData = await response.json();
            Swal.fire({
                title: 'Error',
                text: errorData.message,
                icon: 'error',
                confirmButtonText: 'Aceptar'
            });
        }
    } catch (error) {
        Swal.fire({
            title: 'Error',
            text: 'Hubo un error al registrar el usuario. Por favor, intente nuevamente.',
            icon: 'error',
            confirmButtonText: 'Aceptar'
        });
    }
}

document.addEventListener('DOMContentLoaded', function () { 
  const nombreUsuario = sessionStorage.getItem('nombre');
  console.log("Nombre del usuario en sessionStorage:", nombreUsuario); // Verifica si el valor es correcto
  
  if (nombreUsuario) {
      document.getElementById('welcome-message').innerHTML = `Hola ${nombreUsuario}`;
  } else {
      console.log("No se encontró el nombre en sessionStorage. Redirigiendo a login...");
      window.location.href = 'login.html';
  }
});

setTimeout(() => {
  if (responseData.tipo === 'comerciante') {
    window.location.href = 'index-comer.html';
  } else if (responseData.tipo === 'usuario') {
    window.location.href = 'index-usuario.html';
  }
}, 100); // Agrega un retardo de 100 milisegundos

document.addEventListener('DOMContentLoaded', function () {
  const nombreUsuario = sessionStorage.getItem('nombre');

  if (!nombreUsuario) {
    // Si no hay usuario logueado, redirigir al login
    window.location.href = 'login.html';
  } else {
    // Mostrar el nombre del usuario en la página
    document.getElementById('bienvenida-usuario').textContent = `Bienvenido, ${nombreUsuario}`;
  }
});

$(document).ready(function(){
  $("#carousel-example").owlCarousel({
    items: 1, // Solo una imagen a la vez
    loop: true, // Para que el carrusel sea cíclico
    autoplay: true, // Habilitar el autoplay
    autoplayTimeout: 1800, // Velocidad del autoplay (cambia a 1.5 segundos)
    autoplayHoverPause: true, // Pausar al pasar el mouse por encima
    dots: true, // Mostrar puntos de navegación
    nav: true, // Habilitar las flechas de navegación
    navText: ["<i class='fa fa-chevron-left'></i>", "<i class='fa fa-chevron-right'></i>"], // Flechas de navegación
    smartSpeed: 600 // Velocidad de transición entre imágenes
  });
});

 // Redirigir a la categoría seleccionada en el selector de categorías
 document.getElementById('category-select').addEventListener('change', function () {
      const category = this.value;
      if (category) {
        window.location.href = category;
      }
    });

    // Función para redirigir a una página específica al hacer clic en las categorías
    function redirectToCategory(page) {
      window.location.href = page;
    }

// Filtrar productos en tiempo real
function filtrarProductosTodos() {
    const input = document.getElementById("filter_name").value.toLowerCase();
    const productos = document.querySelectorAll(".small-images .image-box");

    productos.forEach(producto => {
        const nombreProducto = producto.querySelector("img").alt.toLowerCase();
        producto.style.display = nombreProducto.includes(input) ? "block" : "none";
    });
}

// Iniciar el carrusel automáticamente
$(document).ready(function () {
    $("#carousel-example").owlCarousel({
        items: 1,
        loop: true,
        autoplay: true,
        autoplayTimeout: 3000, // Cambiar cada 3 segundos
        autoplayHoverPause: true,
        nav: true,
        dots: true,
        navText: [
            "<i class='fa fa-chevron-left'></i>",
            "<i class='fa fa-chevron-right'></i>"
        ]
    });
});

// Cerrar la lista de sugerencias al hacer clic fuera
document.addEventListener('click', function (e) {
    if (!e.target.closest('.search-bar')) {
        document.getElementById('autocomplete-list').style.display = 'none';
    }
});

;function obtenerRecomendacionesPorCategoria(categoria) {
    const backendURL = `http://127.0.0.1:5001/recomendaciones_categoria/${categoria.toLowerCase()}`;

    fetch(backendURL)
        .then(response => {
            if (!response.ok) {
                throw new Error(`Error en la API: ${response.statusText}`);
            }
            return response.json();
        })
        .then(recomendaciones => {
            mostrarRecomendaciones(categoria, recomendaciones);
        })
        .catch(error => {
            console.error(`Error al cargar las recomendaciones para ${categoria}:`, error);
        });
}

function mostrarRecomendaciones(categoria, recomendaciones) {
    const contenedorRecomendaciones = document.getElementById(`productos-recomendados-${categoria.toLowerCase()}`);
    contenedorRecomendaciones.innerHTML = ''; // Limpiar contenido anterior

    if (recomendaciones.length === 0) {
        contenedorRecomendaciones.innerHTML = '<p>No se encontraron productos recomendados para esta categoría.</p>';
        return;
    }

    const productosParaMostrar = recomendaciones.slice(0, 10); // Limitar a 5 productos

    productosParaMostrar.forEach(producto => {
        const productoHTML = `
            <div class="producto-item-recomendado" onclick="window.location.href='product.html?id=${producto.id}'">
                <img src="${producto.foto_url || 'image-placeholder.png'}" alt="${producto.nombre}" />
                <div class="producto-info-recomendado">
                    <h3>${producto.nombre}</h3>
                    <p class="precio">₲${Number(producto.precio).toLocaleString('es-PY')}</p>
                </div>
            </div>
        `;
        contenedorRecomendaciones.insertAdjacentHTML('beforeend', productoHTML);
    });
}


document.addEventListener('DOMContentLoaded', () => {
    const categorias = ['electrónica', 'informática', 'automóviles', 'belleza', 'ropa']; 
    categorias.forEach(categoria => obtenerRecomendacionesPorCategoria(categoria));
});
let currentIndex = 0; // Índice actual del carrusel
let debounceTimeout; // Timeout para el debounce

function mostrarImagen(index, carouselImages) {
    // Asegurar que el índice se mantenga dentro de los límites
    const totalImages = carouselImages.length;
    currentIndex = (index + totalImages) % totalImages;

    // Ocultar todas las imágenes
    carouselImages.forEach(img => img.classList.remove('active'));

    // Mostrar la imagen correspondiente
    carouselImages[currentIndex].classList.add('active');
}

function cambiarImagen(direccion, carouselImages) {
    clearTimeout(debounceTimeout); // Limpiar cualquier timeout anterior

    // Aplicar un debounce de 500ms para evitar cambios rápidos
    debounceTimeout = setTimeout(() => {
        mostrarImagen(currentIndex + direccion, carouselImages);
    }, 500);
}
document.querySelectorAll('.carousel').forEach(carousel => {
    let currentIndex = 0; // Índice para este carrusel
    let debounceTimeout; // Timeout para el debounce en este carrusel

    const images = carousel.querySelectorAll('.carousel-images img');
    const arrowLeft = carousel.querySelector('.arrow-left');
    const arrowRight = carousel.querySelector('.arrow-right');

    function mostrarImagen(index) {
        const totalImages = images.length;
        currentIndex = (index + totalImages) % totalImages;

        // Ocultar todas las imágenes
        images.forEach(img => img.classList.remove('active'));

        // Mostrar la imagen correspondiente
        images[currentIndex].classList.add('active');
    }

    function cambiarImagen(direccion) {
        clearTimeout(debounceTimeout); // Limpiar cualquier timeout anterior

        debounceTimeout = setTimeout(() => {
            mostrarImagen(currentIndex + direccion);
        }, 500);
    }

    // Agregar eventos a los botones
    arrowLeft.addEventListener('click', () => cambiarImagen(-1));
    arrowRight.addEventListener('click', () => cambiarImagen(1));
});

document.querySelectorAll('.main-container').forEach(container => {
    let currentIndex = 0;
    const images = container.querySelectorAll('.carousel-images img');
    const arrowLeft = container.querySelector('.arrow-left');
    const arrowRight = container.querySelector('.arrow-right');
    const totalImages = images.length;

    // Función para mostrar la imagen actual
    function mostrarImagen(index) {
        currentIndex = (index + totalImages) % totalImages;

        images.forEach(img => img.classList.remove('active'));
        images[currentIndex].classList.add('active');
    }

    // Eventos para los botones
    arrowLeft.addEventListener('click', () => {
        mostrarImagen(currentIndex - 1);
    });

    arrowRight.addEventListener('click', () => {
        mostrarImagen(currentIndex + 1);
    });

    // Cambio automático cada 3 segundos
    setInterval(() => {
        mostrarImagen(currentIndex + 1);
    }, 3000);
});
document.addEventListener("DOMContentLoaded", async () => {
            const usuarioId = localStorage.getItem("Id");
            console.log("usuarioId desde localStorage:", Id); // Verificación

            if (!Id) {
                alert("usuarioId no encontrado en localStorage");
                return;
            }

            try {
                const response = await fetch(`http://127.0.0.1:5002/recomendaciones_por_gustos?usuarioId=${usuarioId}`);
                if (!response.ok) {
                    throw new Error("Error al obtener recomendaciones");
                }

                const productos = await response.json();
                console.log("Productos recibidos:", productos); // Verificación de productos
                mostrarProductos(productos);
            } catch (error) {
                console.error("Error fetching productos:", error);
            }
        });
        function mostrarProductos(productos) {
  const contenedor = document.getElementById("productos-lista");
  contenedor.innerHTML = ""; // Limpia el contenedor

  productos.forEach(producto => {
    const productoDiv = `
      <div class="product-item">
        <img src="${producto.foto_url || 'image/not-found.png'}" alt="${producto.nombre}" class="product-image">
        <h3>${producto.nombre}</h3>
        <p>${producto.descripcion}</p>
        <p class="price">₲${Number(producto.precio).toLocaleString('es-PY')}</p>
      </div>
    `;
    contenedor.innerHTML += productoDiv;
  });
}
let lastScrollTop = 0;
const header = document.querySelector('.header');

window.addEventListener('scroll', () => {
    let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    if (scrollTop > lastScrollTop) {
        // Desplazamiento hacia abajo: ocultar header
        header.style.top = '-80px'; //valor según la altura del header
    } else {
        // Desplazamiento hacia arriba: mostrar header
        header.style.top = '0';
    }

    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; // Asegura que el valor de scroll no sea negativo
});

document.addEventListener('DOMContentLoaded', function () {
  const searchInput = document.getElementById('filter_name');
  const searchButton = document.querySelector('.button-search');
  const resultContainer = document.getElementById('search-results');

  // Evento al escribir en el campo de búsqueda
  searchInput.addEventListener('input', () => {
    const query = searchInput.value.trim();
    if (query) {
      fetchResults(query);
    } else {
      resultContainer.style.display = 'none';
    }
  });

  // Evento al hacer clic en el botón de búsqueda
  searchButton.addEventListener('click', () => {
    const query = searchInput.value.trim();
    if (query) {
      fetchResults(query);
    }
  });
  // Función para buscar productos en el backend
async function buscarProductoEnBackend() {
  const query = document.getElementById("filter_name").value.trim();

  if (!query) {
    alert("Por favor, ingresa un término de búsqueda.");
    return;
  }

  try {
    const response = await fetch(`http://localhost:3000/api/buscar?query=${encodeURIComponent(query)}`);

    if (!response.ok) {
      throw new Error("Error en la respuesta del servidor");
    }

    const data = await response.json();

    if (data.length === 0) {
      document.getElementById("productos-lista").innerHTML = "<p>No se encontraron productos para el criterio seleccionado.</p>";
    } else {
      mostrarProductosEnLista(data); // Llama a la función para mostrar los productos
    }
  } catch (error) {
    console.error("Error en la búsqueda:", error);
    document.getElementById("productos-lista").innerHTML = "<p>Error en la búsqueda. Intente nuevamente.</p>";
  }
}

// Mostrar productos en el contenedor "productos-lista" con enlace a la página del producto
function mostrarProductosEnLista(productos) {
  const contenedor = document.getElementById("productos-lista");
  contenedor.innerHTML = ""; // Limpia el contenedor

  productos.forEach(producto => {
    const productoDiv = `
      <div class="product-item" onclick="redirigirProducto(${producto.id})">
        <img src="${producto.foto_url || 'image/not-found.png'}" alt="${producto.nombre}" class="product-image">
        <h3>${producto.nombre}</h3>
        <p>${producto.descripcion}</p>
        <p class="price">₲${Number(producto.precio).toLocaleString('es-PY')}</p>
      </div>
    `;
    contenedor.innerHTML += productoDiv;
  });
}
function mostrarSugerencias(productos) {
    const list = document.getElementById("autocomplete-list");
    list.innerHTML = ''; // Limpiar el contenido previo

    productos.forEach(producto => {
        const item = document.createElement('div');
        item.className = 'autocomplete-item';
        item.textContent = producto.nombre; // Solo muestra el nombre del producto
        item.addEventListener('click', () => {
            document.getElementById("filter_name").value = producto.nombre; // Llena el campo de búsqueda con el nombre
            list.style.display = 'none';
            buscarProductoEnBackend(); // Llama a la búsqueda en el backend con el término seleccionado
        });
        list.appendChild(item);
    });

    list.style.display = 'block'; // Mostrar el contenedor de resultados
}


// Función para buscar productos al hacer clic en el botón de búsqueda
function buscarProductoEnBackend() {
    const query = document.getElementById("filter_name").value.trim().toLowerCase();
    if (!query) {
        alert("Por favor, ingresa un término de búsqueda.");
        return;
    }

    // Llamada a la API para obtener productos que coincidan con el término de búsqueda
    fetch(`http://localhost:3000/api/buscar?query=${encodeURIComponent(query)}`)
        .then(response => response.json())
        .then(data => {
            if (data.length > 0) {
                mostrarResultadosBusqueda(data); // Mostrar resultados de búsqueda
            } else {
                alert("No se encontraron productos para la búsqueda.");
            }
        })
        .catch(error => console.error("Error en la búsqueda:", error));
}

// Función para mostrar los resultados de búsqueda
function mostrarResultadosBusqueda(productos) {
    const list = document.getElementById("autocomplete-list");
    list.innerHTML = ''; // Limpiar el contenido previo

    productos.forEach(producto => {
        const item = document.createElement('div');
        item.className = 'autocomplete-item';
        item.textContent = producto.nombre; // Solo muestra el nombre del producto
        item.addEventListener('click', () => {
            window.location.href = `product.html?id=${producto.id}`; // Redirigir a la página del producto
        });
        list.appendChild(item);
    });

    list.style.display = 'block'; // Mostrar el contenedor de resultados
}


// Función para filtrar productos mientras escribes en el campo de búsqueda
function filtrarProductosEnTiempoReal() {
    const query = document.getElementById("filter_name").value.trim().toLowerCase();
    if (query === "") {
        document.getElementById("autocomplete-list").style.display = 'none';
        return;
    }

    // Llamada a la API para obtener productos en tiempo real
    fetch(`http://localhost:3000/api/buscar?query=${encodeURIComponent(query)}`)
        .then(response => response.json())
        .then(data => {
            if (data.length > 0) {
                mostrarResultadosBusqueda(data); // Mostrar productos en autocompletado
            } else {
                document.getElementById("autocomplete-list").style.display = 'none';
            }
        })
        .catch(error => console.error("Error en la búsqueda:", error));
}

// Cerrar la lista de autocompletado al hacer clic fuera
document.addEventListener('click', function (e) {
    if (!e.target.closest('.search-bar')) {
        document.getElementById('autocomplete-list').style.display = 'none';
    }
});

// Escuchar el evento `input` para filtrar productos mientras escribe
document.getElementById("filter_name").addEventListener('input', filtrarProductosEnTiempoReal);

// Cerrar la lista de sugerencias al hacer clic fuera del campo de búsqueda
document.addEventListener('click', function (e) {
    if (!e.target.closest('.search-bar')) {
        document.getElementById('autocomplete-list').style.display = 'none';
    }
});

  // Función para realizar la búsqueda
  async function fetchResults(query) {
    try {
      // URL de la API con el parámetro de búsqueda codificado
      const response = await fetch(`https://tcc-api-nodejs.onrender.com/api/buscar?query=${encodeURIComponent(query)}`);
      if (!response.ok) throw new Error('Error en la respuesta del servidor');

      const data = await response.json();

      // Mostrar resultados o mensaje de no encontrado
      if (data.length === 0) {
        resultContainer.innerHTML = '<div>No se encontraron productos.</div>';
      } else {
        resultContainer.innerHTML = data
          .map(product => `<div onclick="redirectToProduct(${product.id})">${product.nombre}</div>`)
          .join('');
      }
      resultContainer.style.display = 'block';
    } catch (error) {
      console.error('Error al buscar productos:', error);
      resultContainer.innerHTML = '<div>Error en la búsqueda. Intente nuevamente.</div>';
      resultContainer.style.display = 'block';
    }
  }

 
  // Cerrar la lista de resultados si se hace clic fuera de ella
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.search-bar')) {
      resultContainer.style.display = 'none';
    }
  });
});
    function redirigirCategoria(page) {
      window.location.href = page;
    }
      // Evento de búsqueda
      document.getElementById("search-button").addEventListener("click", buscarProducto);

// Búsqueda al presionar Enter en el campo de búsqueda
document.getElementById("filter_name").addEventListener("keypress", function (event) {
  if (event.key === "Enter") {
    buscarProducto();
  }
});


 // Función para buscar productos en el backend
 async function buscarProducto() {
      const query = document.getElementById("filter_name").value.trim();

      if (!query) {
        alert("Por favor, ingresa un término de búsqueda.");
        return;
      }

      try {
        const response = await fetch(`http://localhost:3000/api/buscar?query=${encodeURIComponent(query)}`);

        if (!response.ok) {
          throw new Error("Error en la respuesta del servidor");
        }

        const data = await response.json();

        if (data.length === 0) {
          document.getElementById("productos-lista").innerHTML = "<p>No se encontraron productos para el criterio seleccionado.</p>";
        } else {
          mostrarProductos(data); // Llama a la función para mostrar los productos
        }

      } catch (error) {
        console.error("Error en la búsqueda:", error);
        document.getElementById("productos-lista").innerHTML = "<p>Error en la búsqueda. Intente nuevamente.</p>";
      }
    }

    // Mostrar productos en el contenedor "productos-lista"
    function mostrarProductos(productos) {
      const contenedor = document.getElementById("productos-lista");
      contenedor.innerHTML = ""; // Limpia el contenedor

      productos.forEach(producto => {
        const productoDiv = `
          <div class="product-item">
            <img src="${producto.foto_url || 'image/not-found.png'}" alt="${producto.nombre}" class="product-image">
            <h3>${producto.nombre}</h3>
            <p>${producto.descripcion}</p>
            <p class="price">₲${Number(producto.precio).toLocaleString('es-PY')}</p>
          </div>
        `;
        contenedor.innerHTML += productoDiv;
      });
    }

    // Escuchar el evento de clic en el botón de búsqueda
    document.getElementById("search-button").addEventListener("click", buscarProducto);

    // Opcional: si quieres activar la búsqueda al presionar Enter en el campo de búsqueda
    document.getElementById("filter_name").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        buscarProducto();
      }
    });


    function irAProducto(productId) {
  // Redirige a la URL de la página del producto específico
  window.location.href = `producto.html?id=${productId}`;
}

function redirectToCategory() {
    const select = document.getElementById("category-select");
    const selectedCategory = select.value;
    
    // Redirige a la URL de la categoría seleccionada
    if (selectedCategory) {
        window.location.href = selectedCategory;
    }
} 
</script>

 <script src="../header.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</body>
</html>
